(this["webpackJsonplibraries-at-home"]=this["webpackJsonplibraries-at-home"]||[]).push([[0],{114:function(e){e.exports=JSON.parse('{"postcode_api":"https://api-geography.librarydata.uk/rest/postcodes/","video_api":"https://api.librarydata.uk/services/airtable/feeds/youtube.json","services_api":"https://api.librarydata.uk/services/airtable","youtube_url":"https://www.youtube.com/"}')},120:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(10),o=a.n(c),l=(a(92),a(20)),i=a.n(l),s=a(31),u=a(34),m=a(35),p=a(25),d=a(174),b=a(177),f=a(173),h=a(172),y=a(175),E=a(162),g=a(80),v=a(171),x=a(159),w=a(74),k=a.n(w),j=a(75),O=a.n(j),N=a(77),_=a.n(N),W=a(49),C=a.n(W),I=a(78),S=a.n(I),T=a(79),D=a.n(T),F=a(176),L=Object(x.a)((function(e){return{search:{alignContent:"center",textAlign:"center"},subtitle:{textAlign:"center"},textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),width:"25ch"}}}));var z=function(){var e=L();return r.a.createElement(r.a.Fragment,null,r.a.createElement(E.a,{component:"h2",variant:"h3",color:"secondary",className:e.subtitle},"Search"),r.a.createElement("div",{className:e.search},r.a.createElement(F.a,{label:"Postcode",id:"txt_postcode",defaultValue:"",className:e.textField,helperText:"Enter your postcode",margin:"normal",variant:"outlined"}),r.a.createElement("br",null),r.a.createElement(b.a,{variant:"outlined",color:"primary"},"Go")))},A=a(166),M=a(169),P=a(168),Y=a(167),B=a(179),G=a(170),J=a(165),V=a(164),R=a(73),U=a.n(R),$=a(52),q=a.n($),H=a(114);function K(){return Q.apply(this,arguments)}function Q(){return(Q=Object(s.a)(i.a.mark((function e(){var t,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=H.services_api,e.next=3,q.a.get(t);case 3:if(!(a=e.sent)||!a.data){e.next=6;break}return e.abrupt("return",a.data);case 6:return e.abrupt("return",[]);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function X(){return Z.apply(this,arguments)}function Z(){return(Z=Object(s.a)(i.a.mark((function e(){var t,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=H.video_api,e.next=3,q.a.get(t);case 3:if(!(a=e.sent)||!a.data){e.next=6;break}return e.abrupt("return",a.data.items);case 6:return e.abrupt("return",[]);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ee=a(72),te=a.n(ee),ae=Object(x.a)((function(e){return{subtitle:{textAlign:"center"},card:{position:"relative"},media:{height:150},overlay:{fontWeight:500,color:"#ffffff",position:"absolute",top:"0px",left:"0px",backgroundColor:"rgba(0, 0, 0, 0.6)",width:"100%"},video:{maxWidth:"100%"}}}));var ne=function(e){var t=this,a=e.services,c=e.videos,o=Object(n.useState)(!1),l=Object(u.a)(o,2),i=l[0],s=l[1],m=Object(n.useState)(""),p=Object(u.a)(m,2),d=p[0],f=p[1],h=ae(),y=function(e){s(!0),f("https://www.youtube.com/embed/"+e.replace("yt:video:",""))},g=c.reduce((function(e,t){var a=new Date(t.date),n=a.getFullYear()+"-"+(a.getMonth()+1)+"-"+a.getDate();return(e[n]=e[n]||[]).push(t),e}),{}),v={};return a.forEach((function(e){e["YouTube ID"]&&(v[e["YouTube ID"]]=e)})),r.a.createElement(r.a.Fragment,null,r.a.createElement(E.a,{component:"h2",variant:"h3",color:"secondary",className:h.subtitle},"Library TV"),Object.keys(g).map((function(e,a){return r.a.createElement(r.a.Fragment,{key:"frg_dates_"+a},r.a.createElement(V.a,{component:"div",disableSticky:!0},te()(e).calendar(null,{lastDay:"[From yesterday]",sameDay:"[New in today]",nextDay:"[Tomorrow]",lastWeek:"[Last] dddd",nextWeek:"dddd",sameElse:"L"})),r.a.createElement(J.a,{container:!0,spacing:3},g[e].map((function(e,a){var n=e.custom_elements,c=n.filter((function(e){return"media:group"===Object.keys(e)[0]}))[0]["media:group"].filter((function(e){return"media:thumbnail"===Object.keys(e)[0]}))[0]["media:thumbnail"],o=n.filter((function(e){return"yt:channelid"===Object.keys(e)[0]}))[0]["yt:channelid"],l=v[o],i=function(e){var t=H.youtube_url,a={UC:["channel/","Channel"],PL:["playlist/","Playlist"]}[e.substring(0,2)];return{url:t+(a?a[0]:"user/")+e,type:a?a[1]:"Account"}}(o);return r.a.createElement(J.a,{key:"grd_vids_"+a,item:!0,xs:12,sm:6,md:4,lg:4,xl:3},r.a.createElement(A.a,{variant:"outlined",className:h.card},r.a.createElement(Y.a,{className:h.media,image:c._attr.url,title:e.title}),r.a.createElement(P.a,{className:h.overlay},r.a.createElement(E.a,{variant:"caption",component:"p"},e.title)),r.a.createElement(M.a,null,r.a.createElement(b.a,{size:"small",color:"primary",startIcon:r.a.createElement(C.a,null),onClick:y.bind(t,e.guid)},"Play"),l?r.a.createElement(b.a,{size:"small",color:"primary",startIcon:r.a.createElement(U.a,null),target:"_blank",href:i.url},i.type):null)))}))),r.a.createElement("br",null),r.a.createElement(G.a,null),r.a.createElement("br",null))})),r.a.createElement(B.a,{maxWidth:"sm",onClose:function(){s(!1),f("")},"aria-labelledby":"YouTube dialog",open:i},r.a.createElement("iframe",{title:"Video",className:h.video,width:"560",height:"315",src:d,frameborder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"})))},re=Object(g.a)({palette:{primary:k.a,secondary:O.a},overrides:{MuiButton:{text:{textTransform:"none"}},MuiTab:{root:{textTransform:"none"}}}}),ce=Object(x.a)((function(e){return{button:{margin:e.spacing(1)},content:{flexGrow:1,padding:e.spacing(2)},root:{flexGrow:1},title:{margin:e.spacing(3)}}}));var oe=function(){var e=Object(n.useState)([]),t=Object(u.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)([]),l=Object(u.a)(o,2),g=l[0],x=l[1];Object(n.useEffect)((function(){function e(){return(e=Object(s.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K();case 2:t=e.sent,x(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function t(){return(t=Object(s.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X();case 2:t=e.sent,c(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}(),function(){t.apply(this,arguments)}()}),[]);var w=ce();return r.a.createElement(v.a,{theme:re},r.a.createElement(m.a,null,r.a.createElement("div",{className:w.root},r.a.createElement(h.a,null),r.a.createElement(f.a,{maxWidth:"lg"},r.a.createElement(E.a,{color:"secondary",variant:"h4",component:"h1",className:w.title},"Libraries at home")),r.a.createElement(d.a,{position:"static",color:"default",elevation:0},r.a.createElement(f.a,{maxWidth:"lg"},r.a.createElement(y.a,null,r.a.createElement(b.a,{size:"large",className:w.button,component:m.b,to:"/",color:"primary",onClick:function(){},startIcon:r.a.createElement(_.a,null)},"Search"),r.a.createElement(b.a,{size:"large",className:w.button,component:m.b,to:"/watch",color:"primary",onClick:function(){},startIcon:r.a.createElement(C.a,null)},"Watch"),r.a.createElement(b.a,{size:"large",className:w.button,component:m.b,to:"/read",color:"primary",onClick:function(){},startIcon:r.a.createElement(S.a,null)},"Read"),r.a.createElement(b.a,{size:"large",className:w.button,component:m.b,to:"/listen",color:"primary",onClick:function(){},startIcon:r.a.createElement(D.a,null)},"Listen")))),r.a.createElement(f.a,{maxWidth:"lg"},r.a.createElement("main",{className:w.content},r.a.createElement(p.a,{path:"/",exact:!0,render:function(){return r.a.createElement(z,null)}}),r.a.createElement(p.a,{path:"/watch",exact:!0,render:function(){return r.a.createElement(ne,{services:g,videos:a})}}))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(119);o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(oe,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},87:function(e,t,a){e.exports=a(120)},92:function(e,t,a){}},[[87,1,2]]]);
//# sourceMappingURL=main.1486cb2c.chunk.js.map
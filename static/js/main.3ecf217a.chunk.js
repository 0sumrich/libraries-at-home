(this["webpackJsonplibraries-at-home"]=this["webpackJsonplibraries-at-home"]||[]).push([[0],{102:function(e,t,a){e.exports=a(134)},133:function(e,t,a){},134:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(10),i=a.n(c);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(107);var o=a(12),l=a.n(o),s=a(20),u=a(18),m=a(38),p=a(28),d=a(194),f=a(182),b=a(193),h=a(192),v=a(185),y=a(195),g=a(62),E=a(90),x=a(191),k=a(175),w=a(85),j=a.n(w),O=a(86),_=a.n(O),N=a(56),C=a.n(N),L=a(57),S=a.n(L),U=a(88),W=a.n(U),F=a(89),I=a.n(F),R=a(180),T=a(184),D=a(196),Y=a(179),A=a(183),z=a(92),M=a(82),P=a.n(M),B=a(197),J=a(181),G=a(59),V=Object(k.a)((function(e){return{root:{paddingTop:e.spacing(2)},serviceName:{fontWeight:500},leadButton:{marginTop:e.spacing(1)},linkContainer:{marginTop:e.spacing(2),padding:e.spacing(3)},linkText:{}}}));var Z=function(e){var t=e.service,a=V();return n.a.createElement("div",{className:a.root},n.a.createElement(g.a,{component:"h2",variant:"h5",color:"secondary"},"Your local library service is ",n.a.createElement("span",{className:a.serviceName},t.Name)),n.a.createElement("br",null),n.a.createElement(Y.a,{container:!0,spacing:3},G.services_text.library_service.filter((function(e){return e.field in t})).map((function(e,r){return n.a.createElement(Y.a,{key:"grd_service_"+r,item:!0,xs:12,sm:6,md:4,lg:4,xl:3},n.a.createElement(B.a,{severity:"info"},n.a.createElement(J.a,null,e.title.replace("[service]",t.Name)),e.description,n.a.createElement("br",null),n.a.createElement(f.a,{className:a.leadButton,variant:"outlined",size:"large",color:"primary",startIcon:n.a.createElement(P.a,null),target:"_blank",href:t[e.field]},e.link_text)))}))),n.a.createElement(z.a,{variant:"outlined",className:a.linkContainer},n.a.createElement(g.a,{component:"h3",variant:"h6",color:"secondary"},"Useful links"),n.a.createElement(g.a,{component:"p",variant:"body1",className:a.linkText},G.services_text.service_links.filter((function(e){return e.field in t})).map((function(e,a){return n.a.createElement(n.a.Fragment,null,n.a.createElement(A.a,{key:"typ_link_"+a,href:t[e.field],variant:"body1"},e.text),n.a.createElement("br",null))})))))},$=a(44),H=a.n($),K=a(59);function q(e){return Q.apply(this,arguments)}function Q(){return(Q=Object(s.a)(l.a.mark((function e(t){var a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=K.postcode_api+t.replace(/\s/g,""),e.next=3,H.a.get(a);case 3:if(!(r=e.sent)||!r.data){e.next=6;break}return e.abrupt("return",r.data);case 6:return e.abrupt("return",{});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function X(e,t){return ee.apply(this,arguments)}function ee(){return(ee=Object(s.a)(l.a.mark((function e(t,a){var r,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q(t);case 2:if(r=e.sent,!((n=a.filter((function(e){return e.Code===r.library_service}))).length>0)){e.next=6;break}return e.abrupt("return",n[0]);case 6:return e.abrupt("return",{});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var te=Object(k.a)((function(e){return{search:{alignContent:"center",textAlign:"center"},subtitle:{textAlign:"center"},textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),width:"25ch"}}}));var ae=function(e){var t=e.services,a=Object(r.useState)(!1),c=Object(u.a)(a,2),i=c[0],o=c[1],m=Object(r.useState)(""),p=Object(u.a)(m,2),d=p[0],f=p[1],b=Object(r.useState)(""),h=Object(u.a)(b,2),y=h[0],E=h[1],x=Object(r.useState)(""),k=Object(u.a)(x,2),w=k[0],j=k[1],O=te(),_=function(e){return/^[A-Z]{1,2}\d[A-Z\d]? ?\d[A-Z]{2}$/.test(e)},N=function(){var e=Object(s.a)(l.a.mark((function e(){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o(!0),!_(d)){e.next=8;break}return e.next=4,X(d,t);case 4:a=e.sent,j(a),e.next=9;break;case 8:E("Is that a UK postcode?");case 9:o(!1);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return n.a.createElement(n.a.Fragment,null,n.a.createElement(g.a,{component:"h2",variant:"h6",color:"secondary",className:O.subtitle},"Find your library service"),n.a.createElement("div",{className:O.search},n.a.createElement(D.a,{error:""!==y,label:"Postcode",id:"txt_postcode",className:O.textField,margin:"normal",variant:"outlined",value:d,onChange:function(e){var t=e.target.value;""!==y&&_(t)&&E(""),f(e.target.value.toUpperCase())},helperText:y,InputProps:{endAdornment:n.a.createElement(T.a,{position:"end"},n.a.createElement(R.a,{"aria-label":"search for postcode",onClick:N},n.a.createElement(C.a,{color:"primary"})))}})),i?n.a.createElement(v.a,{color:"secondary"}):null,Object.keys(w).length>0?n.a.createElement("div",null,n.a.createElement(Z,{service:w})):null)},re=a(187),ne=a(190),ce=a(189),ie=a(188),oe=a(199),le=a(186),se=a(84),ue=a.n(se),me=a(83),pe=a.n(me),de=a(59);function fe(){return be.apply(this,arguments)}function be(){return(be=Object(s.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=de.services_api,e.next=3,H.a.get(t);case 3:if(!(a=e.sent)||!a.data){e.next=6;break}return e.abrupt("return",a.data);case 6:return e.abrupt("return",[]);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function he(){return ve.apply(this,arguments)}function ve(){return(ve=Object(s.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=de.video_api,e.next=3,H.a.get(t);case 3:if(!(a=e.sent)||!a.data){e.next=6;break}return e.abrupt("return",a.data.items);case 6:return e.abrupt("return",[]);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ye=Object(k.a)((function(e){return{subtitle:{textAlign:"center"},card:{position:"relative"},media:{height:150},overlay:{fontWeight:500,color:"#ffffff",position:"absolute",top:"0px",left:"0px",backgroundColor:"rgba(0, 0, 0, 0.6)",width:"100%"},video:{maxWidth:"100%"}}}));var ge=function(e){var t=this,a=e.services,c=e.videos,i=Object(r.useState)(!1),o=Object(u.a)(i,2),l=o[0],s=o[1],m=Object(r.useState)(""),p=Object(u.a)(m,2),d=p[0],b=p[1],h=ye(),v=function(e){s(!0),b("https://www.youtube.com/embed/"+e.replace("yt:video:",""))},y=c.reduce((function(e,t){var a=new Date(t.date),r=a.getFullYear()+"-"+(a.getMonth()+1)+"-"+a.getDate();return(e[r]=e[r]||[]).push(t),e}),{}),E={};return a.forEach((function(e){e["YouTube ID"]&&(E[e["YouTube ID"]]=e)})),n.a.createElement(n.a.Fragment,null,n.a.createElement(g.a,{component:"h2",variant:"h6",color:"secondary",className:h.subtitle},"Watch library TV"),Object.keys(y).map((function(e,a){return n.a.createElement(n.a.Fragment,{key:"frg_dates_"+a},n.a.createElement(le.a,{component:"div",disableSticky:!0},pe()(e,"YYYY-MM-DD").calendar(null,{lastDay:"[From yesterday]",sameDay:"[New in today]",nextDay:"[Tomorrow]",lastWeek:"[Last] dddd",nextWeek:"dddd",sameElse:"L"})),n.a.createElement(Y.a,{container:!0,spacing:3},y[e].map((function(e,a){var r=e.custom_elements,c=r.filter((function(e){return"media:group"===Object.keys(e)[0]}))[0]["media:group"].filter((function(e){return"media:thumbnail"===Object.keys(e)[0]}))[0]["media:thumbnail"],i=r.filter((function(e){return"yt:channelid"===Object.keys(e)[0]}))[0]["yt:channelid"],o=E[i],l=function(e){var t=de.youtube_url,a={UC:["channel/","Channel"],PL:["playlist/","Playlist"]}[e.substring(0,2)];return{url:t+(a?a[0]:"user/")+e,type:a?a[1]:"Account"}}(i);return n.a.createElement(Y.a,{key:"grd_vids_"+a,item:!0,xs:12,sm:6,md:4,lg:4,xl:3},n.a.createElement(re.a,{variant:"outlined",className:h.card},n.a.createElement(ie.a,{className:h.media,image:c._attr.url,title:e.title}),n.a.createElement(ce.a,{className:h.overlay},n.a.createElement(g.a,{variant:"caption",component:"p"},e.title)),n.a.createElement(ne.a,null,n.a.createElement(f.a,{size:"small",color:"primary",startIcon:n.a.createElement(S.a,null),onClick:v.bind(t,e.guid)},"Play"),o?n.a.createElement(f.a,{size:"small",color:"primary",startIcon:n.a.createElement(ue.a,null),target:"_blank",href:l.url},l.type):null)))}))),n.a.createElement("br",null))})),n.a.createElement(oe.a,{maxWidth:"sm",onClose:function(){s(!1),b("")},"aria-labelledby":"YouTube dialog",open:l},n.a.createElement("iframe",{title:"Video",className:h.video,width:"560",height:"315",src:d,frameborder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"})))},Ee=Object(E.a)({palette:{primary:j.a,secondary:_.a},overrides:{MuiButton:{text:{textTransform:"none"}},MuiTab:{root:{textTransform:"none"}}}}),xe=Object(k.a)((function(e){return{button:{margin:e.spacing(1)},content:{flexGrow:1,padding:e.spacing(2)},root:{flexGrow:1},title:{margin:e.spacing(3)}}}));var ke=function(){var e=Object(r.useState)(!1),t=Object(u.a)(e,2),a=t[0],c=t[1],i=Object(r.useState)(!1),o=Object(u.a)(i,2),E=o[0],k=o[1],w=Object(r.useState)([]),j=Object(u.a)(w,2),O=j[0],_=j[1],N=Object(r.useState)([]),L=Object(u.a)(N,2),U=L[0],F=L[1];Object(r.useEffect)((function(){function e(){return(e=Object(s.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(!0),e.next=3,fe();case 3:t=e.sent,F(t),c(!1);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function t(){return(t=Object(s.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k(!0),e.next=3,he();case 3:t=e.sent,_(t),k(!1);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}(),function(){t.apply(this,arguments)}()}),[]);var R=xe();return n.a.createElement(x.a,{theme:Ee},n.a.createElement(m.a,null,n.a.createElement("div",{className:R.root},n.a.createElement(h.a,null),n.a.createElement(b.a,{maxWidth:"lg"},n.a.createElement(g.a,{color:"secondary",variant:"h4",component:"h1",className:R.title},"Libraries at home")),n.a.createElement(d.a,{position:"static",color:"default",elevation:0},n.a.createElement(b.a,{maxWidth:"lg"},n.a.createElement(y.a,null,n.a.createElement(f.a,{size:"large",className:R.button,component:m.b,to:"/",color:"primary",onClick:function(){},startIcon:n.a.createElement(C.a,null)},"Search"),n.a.createElement(f.a,{size:"large",className:R.button,component:m.b,to:"/watch",color:"primary",onClick:function(){},startIcon:n.a.createElement(S.a,null)},"Watch"),n.a.createElement(f.a,{size:"large",className:R.button,component:m.b,to:"/read",color:"primary",onClick:function(){},startIcon:n.a.createElement(W.a,null)},"Read"),n.a.createElement(f.a,{size:"large",className:R.button,component:m.b,to:"/listen",color:"primary",onClick:function(){},startIcon:n.a.createElement(I.a,null)},"Listen")))),a||E?n.a.createElement(v.a,{color:"secondary"}):null,n.a.createElement(b.a,{maxWidth:"lg"},n.a.createElement("main",{className:R.content},n.a.createElement(p.a,{path:"/",exact:!0,render:function(){return n.a.createElement(ae,{services:U})}}),n.a.createElement(p.a,{path:"/watch",exact:!0,render:function(){return n.a.createElement(ge,{services:U,videos:O})}}))))))};a(133);i.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(ke,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},59:function(e){e.exports=JSON.parse('{"postcode_api":"https://api-geography.librarydata.uk/rest/postcodes/","video_api":"https://api.librarydata.uk/services/airtable/feeds/youtube.json","services_api":"https://api.librarydata.uk/services/airtable","youtube_url":"https://www.youtube.com/","services_text":{"library_service":[{"field":"Service URL","title":"Visit [service] website","description":"Information on using your library","link_text":"Go to service website"},{"field":"New member URL","title":"Join [service] libraries","description":"Start having fun","link_text":"Join now"},{"field":"Childrens service URL ","title":"Info for children","description":"Find out what the library offers","link_text":"Explore children\'s services"}],"service_links":[{"field":"Libraries URL","text":"Find your local library"},{"field":"Mobile libraries URL","text":"Find out when the mobile library visits"},{"field":"Home service URL","text":"Check if the library service can come to your home"},{"field":"Computer access URL","text":"Use a computer in your library"},{"field":"Wifi access URL","text":"Connect to WiFi in your library"},{"field":"Fees and charges URL","text":"Check the charges for library services"},{"field":"News or Blog URL","text":"Read latest news from the library"},{"field":"Podcast URL","text":"Listen to a library Podcast"}]}}')}},[[102,1,2]]]);
//# sourceMappingURL=main.3ecf217a.chunk.js.map
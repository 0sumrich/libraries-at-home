(this["webpackJsonplibraries-at-home"]=this["webpackJsonplibraries-at-home"]||[]).push([[0],{110:function(e,t,a){e.exports=a(142)},141:function(e,t,a){},142:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(11),c=a.n(i);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(115);var o=a(10),l=a.n(o),s=a(18),u=a(15),m=a(41),d=a(32),p=a(202),b=a(190),f=a(201),g=a(200),v=a(193),h=a(203),y=a(66),E=a(99),k=a(199),x=a(182),w=a(94),_=a.n(w),j=a(95),O=a.n(j),N=a(97),L=a.n(N),T=a(98),I=a.n(T),C=a(60),S=a.n(C),F=a(58),R=a.n(F),U=a(185),W=a(187),Y=a(87),A=a.n(Y),D=Object(x.a)((function(e){return{root:{paddingTop:e.spacing(5),marginTop:e.spacing(3),marginBottom:e.spacing(5),width:"100%"},grid:{marginTop:e.spacing(2)},loveIcon:{marginLeft:e.spacing(1),marginRight:e.spacing(1)},footerText:{verticalAlign:"middle",display:"inline-flex"}}}));var B=function(e){var t=D();return r.a.createElement("div",{className:t.root},r.a.createElement(U.a,null),r.a.createElement(W.a,{container:!0,spacing:3,className:t.grid},r.a.createElement(W.a,{item:!0,xs:12,sm:12,md:6,lg:6,xl:6},r.a.createElement(y.a,{variant:"body1",color:"secondary",className:t.footerText},"LibrariesHacked. Built with ",r.a.createElement(A.a,{color:"error",className:t.loveIcon})," for libraries.")),r.a.createElement(W.a,{item:!0,xs:12,sm:12,md:6,lg:6,xl:6},r.a.createElement(y.a,{variant:"body1",color:"secondary",className:t.footerText},"Data compiled with thanks to @calire, @shedsue, @richardveevers"))))},M=a(188),z=a(192),P=a(204),J=a(191),G=a(101),V=a(92),Z=a.n(V),H=a(56),$=a.n(H),K=a(88),q=a.n(K),Q=a(89),X=a.n(Q),ee=a(90),te=a.n(ee),ae=a(205),ne=a(189),re=a(44),ie={InstagramIcon:q.a,FacebookIcon:X.a,TwitterIcon:te.a},ce=Object(x.a)((function(e){return{header:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},root:{paddingTop:e.spacing(2)},serviceName:{fontWeight:500},social:{display:"flex",alignItems:"center",justifyContent:"center"},socialIcon:{margin:e.spacing(1)},leadButton:{marginTop:e.spacing(1)},linkContainer:{marginTop:e.spacing(2),padding:e.spacing(2)},linkText:{columnWidth:"16em"},columnLink:{verticalAlign:"middle",display:"inline-flex"}}}));var oe=function(e){var t=e.service,a=ce();return r.a.createElement("div",{className:a.root},r.a.createElement(y.a,{className:a.header,component:"h2",variant:"h5",color:"secondary"},"Your local library service is ",r.a.createElement("span",{className:a.serviceName},t.Name)),r.a.createElement("div",{className:a.social},re.services_text.social.filter((function(e){return e.field in t})).map((function(e,n){var i=ie[e.icon];return r.a.createElement(M.a,{key:"icn_social_"+n,component:"a",className:a.socialIcon,target:"_blank",href:e.url+t[e.field],title:e.title},r.a.createElement(i,null))}))),r.a.createElement(W.a,{container:!0,spacing:3},re.services_text.library_service.filter((function(e){return e.field in t})).map((function(e,n){return r.a.createElement(W.a,{key:"grd_service_"+n,item:!0,xs:12,sm:6,md:4,lg:4,xl:4},r.a.createElement(ae.a,{severity:"info"},r.a.createElement(ne.a,null,e.title.replace("[service]",t.Name)),e.description,r.a.createElement("br",null),r.a.createElement(b.a,{className:a.leadButton,variant:"outlined",size:"large",color:"primary",startIcon:r.a.createElement(Z.a,null),target:"_blank",href:t[e.field]},e.link_text)))}))),r.a.createElement(G.a,{variant:"outlined",className:a.linkContainer},r.a.createElement(y.a,{component:"h3",variant:"h6",color:"secondary",className:a.header},"Useful links"),r.a.createElement(y.a,{component:"p",variant:"body1",className:a.linkText},re.services_text.service_links.filter((function(e){return e.field in t})).map((function(e,n){return r.a.createElement(y.a,{key:"typ_links_"+n,component:"span",className:a.columnLink},r.a.createElement($.a,null),r.a.createElement(J.a,{key:"typ_link_"+n,target:"_blank",href:t[e.field],variant:"body1"},e.text),r.a.createElement("br",null))})))))},le=a(40),se=a.n(le),ue=a(44);function me(e){return de.apply(this,arguments)}function de(){return(de=Object(s.a)(l.a.mark((function e(t){var a,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=ue.postcode_api+t.replace(/\s/g,""),e.next=3,se.a.get(a);case 3:if(!(n=e.sent)||!n.data){e.next=6;break}return e.abrupt("return",n.data);case 6:return e.abrupt("return",{});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pe(e,t){return be.apply(this,arguments)}function be(){return(be=Object(s.a)(l.a.mark((function e(t,a){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,me(t);case 2:if(n=e.sent,!((r=a.filter((function(e){return e.Code===n.library_service}))).length>0)){e.next=6;break}return e.abrupt("return",r[0]);case 6:return e.abrupt("return",{});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var fe=Object(x.a)((function(e){return{search:{alignContent:"center",textAlign:"center"},subtitle:{textAlign:"center"},textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),width:"25ch",backgroundColor:"white"}}}));var ge=function(e){var t=e.loading_services,a=e.services,i=e.service,c=e.setService,o=Object(n.useState)(!1),m=Object(u.a)(o,2),d=m[0],p=m[1],b=Object(n.useState)(""),f=Object(u.a)(b,2),g=f[0],h=f[1],E=Object(n.useState)(""),k=Object(u.a)(E,2),x=k[0],w=k[1],_=fe(),j=function(e){return/^[A-Z]{1,2}\d[A-Z\d]? ?\d[A-Z]{2}$/.test(e)},O=function(){var e=Object(s.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(p(!0),!j(g.trim())){e.next=8;break}return e.next=4,pe(g.trim(),a);case 4:t=e.sent,c(t),e.next=9;break;case 8:w("Is that a UK postcode?");case 9:p(!1);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a,{component:"h2",variant:"h6",color:"secondary",className:_.subtitle},"Library services"),r.a.createElement(y.a,{component:"p",variant:"body1",color:"secondary",className:_.subtitle},"Start by finding your local library service"),r.a.createElement("div",{className:_.search},r.a.createElement(P.a,{error:""!==x,label:"Postcode",id:"txt_postcode",className:_.textField,margin:"normal",variant:"outlined",value:g,onChange:function(e){var t=e.target.value.toUpperCase();""!==x&&j(t.trim())&&w(""),h(t)},helperText:x,InputProps:{endAdornment:r.a.createElement(z.a,{position:"end"},r.a.createElement(M.a,{disabled:t||d,"aria-label":"search for postcode",onClick:O},r.a.createElement(R.a,{color:"primary"})))}})),d?r.a.createElement(v.a,{color:"secondary"}):null,Object.keys(i).length>0?r.a.createElement("div",null,r.a.createElement(oe,{service:i})):null)},ve=a(195),he=a(198),ye=a(197),Ee=a(196),ke=a(207),xe=a(194),we=a(93),_e=a.n(we),je=a(59),Oe=a.n(je),Ne=a(44);function Le(){return Te.apply(this,arguments)}function Te(){return(Te=Object(s.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Ne.services_api,e.next=3,se.a.get(t);case 3:if(!(a=e.sent)||!a.data){e.next=6;break}return e.abrupt("return",a.data);case 6:return e.abrupt("return",[]);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ie(){return Ce.apply(this,arguments)}function Ce(){return(Ce=Object(s.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Ne.video_api,e.next=3,se.a.get(t);case 3:if(!(a=e.sent)||!a.data){e.next=6;break}return e.abrupt("return",a.data.items);case 6:return e.abrupt("return",[]);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Se(){return Fe.apply(this,arguments)}function Fe(){return(Fe=Object(s.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Ne.blogs_api,e.next=3,se.a.get(t);case 3:if(!(a=e.sent)||!a.data){e.next=6;break}return e.abrupt("return",a.data.items);case 6:return e.abrupt("return",[]);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Re=a(44),Ue=Object(x.a)((function(e){return{subtitle:{textAlign:"center"},card:{position:"relative"},media:{height:150},overlay:{fontWeight:500,color:"#ffffff",position:"absolute",top:"0px",left:"0px",backgroundColor:"rgba(0, 0, 0, 0.6)",width:"100%"},video:{maxWidth:"100%"}}}));var We=function(e){var t=this,a=e.services,i=e.videos,c=Object(n.useState)(!1),o=Object(u.a)(c,2),l=o[0],s=o[1],m=Object(n.useState)(""),d=Object(u.a)(m,2),p=d[0],f=d[1],g=Ue(),v=function(e){s(!0),f("https://www.youtube.com/embed/"+e.replace("yt:video:",""))},h=i.reduce((function(e,t){var a=new Date(t.date),n=a.getFullYear()+"-"+(a.getMonth()+1)+"-"+a.getDate();return(e[n]=e[n]||[]).push(t),e}),{}),E={};return a.forEach((function(e){e["YouTube ID"]&&(E[e["YouTube ID"]]=e)})),r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a,{component:"h2",variant:"h6",color:"secondary",className:g.subtitle},"Library TV"),r.a.createElement(y.a,{component:"p",variant:"body1",color:"secondary",className:g.subtitle},"Watch videos published by library services on YouTube"),Object.keys(h).map((function(e,a){return r.a.createElement(r.a.Fragment,{key:"frg_dates_"+a},r.a.createElement(xe.a,{component:"div",disableSticky:!0},Oe()(e,"YYYY-MM-DD").calendar(null,Re.calendar_display)),r.a.createElement(W.a,{container:!0,spacing:3},h[e].map((function(e,a){var n=e.custom_elements,i=n.filter((function(e){return"media:group"===Object.keys(e)[0]}))[0]["media:group"].filter((function(e){return"media:thumbnail"===Object.keys(e)[0]}))[0]["media:thumbnail"],c=n.filter((function(e){return"yt:channelid"===Object.keys(e)[0]}))[0]["yt:channelid"],o=E[c],l=function(e){var t=Ne.youtube_url,a={UC:["channel/","Channel"],PL:["playlist/","Playlist"]}[e.substring(0,2)];return{url:t+(a?a[0]:"user/")+e,type:a?a[1]:"Account"}}(c);return r.a.createElement(W.a,{key:"grd_vids_"+a,item:!0,xs:12,sm:6,md:4,lg:4,xl:3},r.a.createElement(ve.a,{variant:"outlined",className:g.card},r.a.createElement(Ee.a,{className:g.media,image:i._attr.url,title:e.title}),r.a.createElement(ye.a,{className:g.overlay},r.a.createElement(y.a,{variant:"caption",component:"p"},e.title)),r.a.createElement(he.a,null,r.a.createElement(b.a,{size:"small",color:"primary",startIcon:r.a.createElement(S.a,null),onClick:v.bind(t,e.guid)},"Play"),o?r.a.createElement(b.a,{size:"small",color:"primary",startIcon:r.a.createElement(_e.a,null),target:"_blank",href:l.url},l.type):null)))}))),r.a.createElement("br",null))})),r.a.createElement(ke.a,{maxWidth:"sm",onClose:function(){s(!1),f("")},"aria-labelledby":"YouTube dialog",open:l},r.a.createElement("iframe",{title:"Video",className:g.video,width:"560",height:"315",src:p,frameborder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"})))},Ye=a(44),Ae=Object(x.a)((function(e){return{columnLink:{verticalAlign:"middle",display:"inline-flex"},header:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},linkContainer:{marginTop:e.spacing(2),padding:e.spacing(2)},linkText:{columnWidth:"16em"}}}));var De=function(e){var t=e.loading_blogs,a=e.blogs,n=Ae(),i=a.reduce((function(e,t){var a=new Date(t.date),n=a.getFullYear()+"-"+(a.getMonth()+1)+"-"+a.getDate();return(e[n]=e[n]||[]).push(t),e}),{});return r.a.createElement(r.a.Fragment,null,r.a.createElement(G.a,{variant:"outlined",className:n.linkContainer},r.a.createElement(y.a,{component:"h3",variant:"h6",color:"secondary",className:n.header},"Recent library blogs"),t?r.a.createElement(v.a,{color:"secondary"}):null,r.a.createElement(y.a,{component:"p",variant:"body1",className:n.linkText},Object.keys(i).slice(0,3).map((function(e,t){return r.a.createElement(r.a.Fragment,{key:"frg_blogdates_"+t},r.a.createElement(xe.a,{component:"span",className:n.columnLink},Oe()(e,"YYYY-MM-DD").calendar(null,Ye.calendar_display)),i[e].map((function(e,t){return r.a.createElement(y.a,{key:"typ_links_"+t,component:"span",className:n.columnLink},r.a.createElement($.a,null),r.a.createElement(J.a,{key:"typ_link_"+t,target:"_blank",href:e.url,variant:"body1"},e.title+" ("+e.author+")"),r.a.createElement("br",null))})))})))))},Be=Object(x.a)((function(e){return{subtitle:{textAlign:"center"}}}));var Me=function(e){var t=e.loading_blogs,a=e.blogs,n=Be();return r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a,{component:"h2",variant:"h6",color:"secondary",className:n.subtitle},"Read"),r.a.createElement(y.a,{component:"p",variant:"body1",color:"secondary",className:n.subtitle},"Reading is good"),r.a.createElement(De,{loading_blogs:t,blogs:a}))},ze=Object(x.a)((function(e){return{subtitle:{textAlign:"center"}}}));var Pe=function(e){var t=ze();return r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a,{component:"h2",variant:"h6",color:"secondary",className:t.subtitle},"Listen..."),r.a.createElement(y.a,{component:"p",variant:"body1",color:"secondary",className:t.subtitle},"Coming soon"))},Je=Object(E.a)({palette:{primary:_.a,secondary:O.a},overrides:{MuiButton:{text:{textTransform:"none"},root:{textTransform:"none"}},MuiTab:{root:{textTransform:"none"}}}}),Ge=Object(x.a)((function(e){return{button:{margin:e.spacing(1)},content:{flexGrow:1,padding:e.spacing(2)},root:{flexGrow:1},title:{margin:e.spacing(3)}}}));var Ve=function(){var e=Object(n.useState)(!1),t=Object(u.a)(e,2),a=t[0],i=t[1],c=Object(n.useState)(!1),o=Object(u.a)(c,2),E=o[0],x=o[1],w=Object(n.useState)(!1),_=Object(u.a)(w,2),j=_[0],O=_[1],N=Object(n.useState)([]),T=Object(u.a)(N,2),C=T[0],F=T[1],U=Object(n.useState)([]),W=Object(u.a)(U,2),Y=W[0],A=W[1],D=Object(n.useState)([]),M=Object(u.a)(D,2),z=M[0],P=M[1],J=Object(n.useState)({}),G=Object(u.a)(J,2),V=G[0],Z=G[1];Object(n.useEffect)((function(){function e(){return(e=Object(s.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i(!0),e.next=3,Le();case 3:t=e.sent,P(t),i(!1);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function t(){return(t=Object(s.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(!0),e.next=3,Ie();case 3:t=e.sent,F(t),x(!1);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function a(){return(a=Object(s.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O(!0),e.next=3,Se();case 3:t=e.sent,A(t),O(!1);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}(),function(){t.apply(this,arguments)}(),function(){a.apply(this,arguments)}()}),[]);var H=Ge();return r.a.createElement(k.a,{theme:Je},r.a.createElement(m.a,null,r.a.createElement("div",{className:H.root},r.a.createElement(g.a,null),r.a.createElement(f.a,{maxWidth:"lg"},r.a.createElement(y.a,{color:"secondary",variant:"h4",component:"h1",className:H.title},"Libraries at home")),r.a.createElement(p.a,{position:"static",color:"default",elevation:0},r.a.createElement(f.a,{maxWidth:"lg"},r.a.createElement(h.a,null,r.a.createElement(b.a,{size:"large",className:H.button,component:m.b,to:"/",color:"primary",onClick:function(){},startIcon:r.a.createElement(R.a,null)},"Search"),r.a.createElement(b.a,{size:"large",className:H.button,component:m.b,to:"/watch",color:"primary",onClick:function(){},startIcon:r.a.createElement(S.a,null)},"Watch"),r.a.createElement(b.a,{size:"large",className:H.button,component:m.b,to:"/read",color:"primary",onClick:function(){},startIcon:r.a.createElement(L.a,null)},"Read"),r.a.createElement(b.a,{size:"large",className:H.button,component:m.b,to:"/listen",color:"primary",onClick:function(){},startIcon:r.a.createElement(I.a,null)},"Listen")))),a||E?r.a.createElement(v.a,{color:"secondary"}):null,r.a.createElement(f.a,{maxWidth:"lg"},r.a.createElement("main",{className:H.content},r.a.createElement(d.a,{path:"/",exact:!0,render:function(){return r.a.createElement(ge,{loading_services:a,services:z,service:V,setService:Z})}}),r.a.createElement(d.a,{path:"/watch",exact:!0,render:function(){return r.a.createElement(We,{services:z,videos:C})}}),r.a.createElement(d.a,{path:"/read",exact:!0,render:function(){return r.a.createElement(Me,{loading_blogs:j,blogs:Y})}}),r.a.createElement(d.a,{path:"/listen",exact:!0,render:function(){return r.a.createElement(Pe,null)}}))),r.a.createElement(f.a,{maxWidth:"lg"},r.a.createElement(B,null)))))};a(141);c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Ve,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},44:function(e){e.exports=JSON.parse('{"postcode_api":"https://api-geography.librarydata.uk/rest/postcodes/","video_api":"https://api.librarydata.uk/services/airtable/feeds/youtube.json","blogs_api":"https://api.librarydata.uk/services/airtable/feeds/blogs.json","services_api":"https://api.librarydata.uk/services/airtable","youtube_url":"https://www.youtube.com/","calendar_display":{"lastDay":"[From Yesterday]","sameDay":"[New Today]","nextDay":"[Tomorrow]","lastWeek":"[Last] dddd","nextWeek":"dddd","sameElse":"L"},"services_text":{"social":[{"field":"Instagram name","icon":"InstagramIcon","url":"https://www.instagram.com/","title":"See photos on Instagram"},{"field":"Facebook page name","icon":"FacebookIcon","url":"https://www.facebook.com/","title":"Follow on Facebook"},{"field":"Twitter handle","icon":"TwitterIcon","url":"https://twitter.com/","title":"See tweets on twitter"}],"library_service":[{"field":"Service URL","title":"Visit [service] website","description":"Information on using your library","link_text":"Go to service website"},{"field":"Catalogue URL","title":"Browse the catalogue","description":"Find out what\'s in your libraries","link_text":"Online catalogue"},{"field":"New member URL","title":"Join [service] libraries","description":"Start having fun with libraries","link_text":"Join now"},{"field":"Childrens service URL","title":"Info for children","description":"Libraries are for everyone","link_text":"See children\'s services"},{"field":"Audiobook URL","title":"Library audiobooks","description":"Listen to stories for free from libraries","link_text":"Find an audiobook"},{"field":"Ebook URL","title":"Library ebooks","description":"Read ebooks on your devices","link_text":"Find an ebook"}],"service_links":[{"field":"Libraries URL","text":"Find your local library"},{"field":"Mobile libraries URL","text":"Find out when the mobile library visits"},{"field":"Home service URL","text":"Check if the library service can come to your home"},{"field":"Events URL","text":"See events going on in libraries"},{"field":"Computer access URL","text":"Use a computer in your library"},{"field":"Wifi access URL","text":"Connect to WiFi in your library"},{"field":"Fees and charges URL","text":"Understand the fees and charges for library services"},{"field":"News or Blog URL","text":"Read latest news from the library"},{"field":"Podcast URL","text":"Listen to a library Podcast"}]}}')}},[[110,1,2]]]);
//# sourceMappingURL=main.060b12cb.chunk.js.map
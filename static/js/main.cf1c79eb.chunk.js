(this["webpackJsonplibraries-at-home"]=this["webpackJsonplibraries-at-home"]||[]).push([[0],{102:function(e,t,a){e.exports=a(134)},107:function(e,t,a){},134:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(10),i=a.n(c),o=(a(107),a(12)),l=a.n(o),s=a(20),u=a(18),m=a(38),p=a(28),d=a(193),b=a(181),f=a(192),h=a(191),v=a(183),y=a(194),E=a(91),g=a(89),x=a(190),k=a(174),w=a(84),j=a.n(w),O=a(85),_=a.n(O),N=a(55),S=a.n(N),C=a(56),I=a.n(C),W=a(87),T=a.n(W),D=a(88),F=a.n(D),L=a(179),Y=a(182),A=a(195),z=a(178),M=a(81),U=a.n(M),J=a(196),P=a(180),R=a(58),B=Object(k.a)((function(e){return{root:{paddingTop:"20px"}}}));var G=function(e){var t=e.service,a=B();return n.a.createElement("div",{className:a.root},n.a.createElement(E.a,{component:"h2",variant:"h6",color:"secondary",className:a.subtitle},"Your local library service is "+t.Name),n.a.createElement("br",null),n.a.createElement(z.a,{container:!0,spacing:3},R.services_text.library_service.map((function(e,a){return n.a.createElement(z.a,{key:"grd_usingurls_"+a,item:!0,xs:12,sm:6,md:4,lg:4,xl:3},n.a.createElement(J.a,{severity:"info"},n.a.createElement(P.a,null,e.title.replace("[service]",t.Name)),e.description,n.a.createElement("br",null),n.a.createElement(b.a,{color:"secondary",startIcon:n.a.createElement(U.a,null),target:"_blank",href:t[e.field]},e.link_text)))}))))},V=a(42),Z=a.n(V),$=a(58);function K(e){return q.apply(this,arguments)}function q(){return(q=Object(s.a)(l.a.mark((function e(t){var a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=$.postcode_api+t.replace(/\s/g,""),e.next=3,Z.a.get(a);case 3:if(!(r=e.sent)||!r.data){e.next=6;break}return e.abrupt("return",r.data);case 6:return e.abrupt("return",{});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function H(e,t){return Q.apply(this,arguments)}function Q(){return(Q=Object(s.a)(l.a.mark((function e(t,a){var r,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K(t);case 2:if(r=e.sent,!((n=a.filter((function(e){return e.Code===r.library_service}))).length>0)){e.next=6;break}return e.abrupt("return",n[0]);case 6:return e.abrupt("return",{});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var X=Object(k.a)((function(e){return{search:{alignContent:"center",textAlign:"center"},subtitle:{textAlign:"center"},textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),width:"25ch"}}}));var ee=function(e){var t=e.services,a=Object(r.useState)(!1),c=Object(u.a)(a,2),i=c[0],o=c[1],m=Object(r.useState)(""),p=Object(u.a)(m,2),d=p[0],b=p[1],f=Object(r.useState)(""),h=Object(u.a)(f,2),y=h[0],g=h[1],x=Object(r.useState)(""),k=Object(u.a)(x,2),w=k[0],j=k[1],O=X(),_=function(e){return/^[A-Z]{1,2}\d[A-Z\d]? ?\d[A-Z]{2}$/.test(e)},N=function(){var e=Object(s.a)(l.a.mark((function e(){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o(!0),!_(d)){e.next=8;break}return e.next=4,H(d,t);case 4:a=e.sent,j(a),e.next=9;break;case 8:g("Is that a UK postcode?");case 9:o(!1);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return n.a.createElement(n.a.Fragment,null,n.a.createElement(E.a,{component:"h2",variant:"h6",color:"secondary",className:O.subtitle},"Find your library service"),n.a.createElement("div",{className:O.search},n.a.createElement(A.a,{error:""!==y,label:"Postcode",id:"txt_postcode",className:O.textField,margin:"normal",variant:"outlined",value:d,onChange:function(e){var t=e.target.value;""!==y&&_(t)&&g(""),b(e.target.value.toUpperCase())},helperText:y,InputProps:{endAdornment:n.a.createElement(Y.a,{position:"end"},n.a.createElement(L.a,{"aria-label":"search for postcode",onClick:N},n.a.createElement(S.a,{color:"primary"})))}})),i?n.a.createElement(v.a,{color:"secondary"}):null,Object.keys(w).length>0?n.a.createElement("div",null,n.a.createElement(G,{service:w})):null)},te=a(185),ae=a(188),re=a(187),ne=a(186),ce=a(198),ie=a(189),oe=a(184),le=a(83),se=a.n(le),ue=a(82),me=a.n(ue),pe=a(58);function de(){return be.apply(this,arguments)}function be(){return(be=Object(s.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=pe.services_api,e.next=3,Z.a.get(t);case 3:if(!(a=e.sent)||!a.data){e.next=6;break}return e.abrupt("return",a.data);case 6:return e.abrupt("return",[]);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fe(){return he.apply(this,arguments)}function he(){return(he=Object(s.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=pe.video_api,e.next=3,Z.a.get(t);case 3:if(!(a=e.sent)||!a.data){e.next=6;break}return e.abrupt("return",a.data.items);case 6:return e.abrupt("return",[]);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ve=Object(k.a)((function(e){return{subtitle:{textAlign:"center"},card:{position:"relative"},media:{height:150},overlay:{fontWeight:500,color:"#ffffff",position:"absolute",top:"0px",left:"0px",backgroundColor:"rgba(0, 0, 0, 0.6)",width:"100%"},video:{maxWidth:"100%"}}}));var ye=function(e){var t=this,a=e.services,c=e.videos,i=Object(r.useState)(!1),o=Object(u.a)(i,2),l=o[0],s=o[1],m=Object(r.useState)(""),p=Object(u.a)(m,2),d=p[0],f=p[1],h=ve(),v=function(e){s(!0),f("https://www.youtube.com/embed/"+e.replace("yt:video:",""))},y=c.reduce((function(e,t){var a=new Date(t.date),r=a.getFullYear()+"-"+(a.getMonth()+1)+"-"+a.getDate();return(e[r]=e[r]||[]).push(t),e}),{}),g={};return a.forEach((function(e){e["YouTube ID"]&&(g[e["YouTube ID"]]=e)})),n.a.createElement(n.a.Fragment,null,n.a.createElement(E.a,{component:"h2",variant:"h6",color:"secondary",className:h.subtitle},"Watch library TV"),Object.keys(y).map((function(e,a){return n.a.createElement(n.a.Fragment,{key:"frg_dates_"+a},n.a.createElement(oe.a,{component:"div",disableSticky:!0},me()(e,"YYYY-MM-DD").calendar(null,{lastDay:"[From yesterday]",sameDay:"[New in today]",nextDay:"[Tomorrow]",lastWeek:"[Last] dddd",nextWeek:"dddd",sameElse:"L"})),n.a.createElement(z.a,{container:!0,spacing:3},y[e].map((function(e,a){var r=e.custom_elements,c=r.filter((function(e){return"media:group"===Object.keys(e)[0]}))[0]["media:group"].filter((function(e){return"media:thumbnail"===Object.keys(e)[0]}))[0]["media:thumbnail"],i=r.filter((function(e){return"yt:channelid"===Object.keys(e)[0]}))[0]["yt:channelid"],o=g[i],l=function(e){var t=pe.youtube_url,a={UC:["channel/","Channel"],PL:["playlist/","Playlist"]}[e.substring(0,2)];return{url:t+(a?a[0]:"user/")+e,type:a?a[1]:"Account"}}(i);return n.a.createElement(z.a,{key:"grd_vids_"+a,item:!0,xs:12,sm:6,md:4,lg:4,xl:3},n.a.createElement(te.a,{variant:"outlined",className:h.card},n.a.createElement(ne.a,{className:h.media,image:c._attr.url,title:e.title}),n.a.createElement(re.a,{className:h.overlay},n.a.createElement(E.a,{variant:"caption",component:"p"},e.title)),n.a.createElement(ae.a,null,n.a.createElement(b.a,{size:"small",color:"primary",startIcon:n.a.createElement(I.a,null),onClick:v.bind(t,e.guid)},"Play"),o?n.a.createElement(b.a,{size:"small",color:"primary",startIcon:n.a.createElement(se.a,null),target:"_blank",href:l.url},l.type):null)))}))),n.a.createElement("br",null),n.a.createElement(ie.a,null),n.a.createElement("br",null))})),n.a.createElement(ce.a,{maxWidth:"sm",onClose:function(){s(!1),f("")},"aria-labelledby":"YouTube dialog",open:l},n.a.createElement("iframe",{title:"Video",className:h.video,width:"560",height:"315",src:d,frameborder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"})))},Ee=Object(g.a)({palette:{primary:j.a,secondary:_.a},overrides:{MuiButton:{text:{textTransform:"none"}},MuiTab:{root:{textTransform:"none"}}}}),ge=Object(k.a)((function(e){return{button:{margin:e.spacing(1)},content:{flexGrow:1,padding:e.spacing(2)},root:{flexGrow:1},title:{margin:e.spacing(3)}}}));var xe=function(){var e=Object(r.useState)(!1),t=Object(u.a)(e,2),a=t[0],c=t[1],i=Object(r.useState)(!1),o=Object(u.a)(i,2),g=o[0],k=o[1],w=Object(r.useState)([]),j=Object(u.a)(w,2),O=j[0],_=j[1],N=Object(r.useState)([]),C=Object(u.a)(N,2),W=C[0],D=C[1];Object(r.useEffect)((function(){function e(){return(e=Object(s.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(!0),e.next=3,de();case 3:t=e.sent,D(t),c(!1);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function t(){return(t=Object(s.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k(!0),e.next=3,fe();case 3:t=e.sent,_(t),k(!1);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}(),function(){t.apply(this,arguments)}()}),[]);var L=ge();return n.a.createElement(x.a,{theme:Ee},n.a.createElement(m.a,null,n.a.createElement("div",{className:L.root},n.a.createElement(h.a,null),n.a.createElement(f.a,{maxWidth:"lg"},n.a.createElement(E.a,{color:"secondary",variant:"h4",component:"h1",className:L.title},"Libraries at home")),n.a.createElement(d.a,{position:"static",color:"default",elevation:0},n.a.createElement(f.a,{maxWidth:"lg"},n.a.createElement(y.a,null,n.a.createElement(b.a,{size:"large",className:L.button,component:m.b,to:"/",color:"primary",onClick:function(){},startIcon:n.a.createElement(S.a,null)},"Search"),n.a.createElement(b.a,{size:"large",className:L.button,component:m.b,to:"/watch",color:"primary",onClick:function(){},startIcon:n.a.createElement(I.a,null)},"Watch"),n.a.createElement(b.a,{size:"large",className:L.button,component:m.b,to:"/read",color:"primary",onClick:function(){},startIcon:n.a.createElement(T.a,null)},"Read"),n.a.createElement(b.a,{size:"large",className:L.button,component:m.b,to:"/listen",color:"primary",onClick:function(){},startIcon:n.a.createElement(F.a,null)},"Listen")))),a||g?n.a.createElement(v.a,{color:"secondary"}):null,n.a.createElement(f.a,{maxWidth:"lg"},n.a.createElement("main",{className:L.content},n.a.createElement(p.a,{path:"/",exact:!0,render:function(){return n.a.createElement(ee,{services:W})}}),n.a.createElement(p.a,{path:"/watch",exact:!0,render:function(){return n.a.createElement(ye,{services:W,videos:O})}}))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(133);i.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(xe,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},58:function(e){e.exports=JSON.parse('{"postcode_api":"https://api-geography.librarydata.uk/rest/postcodes/","video_api":"https://api.librarydata.uk/services/airtable/feeds/youtube.json","services_api":"https://api.librarydata.uk/services/airtable","youtube_url":"https://www.youtube.com/","services_text":{"library_service":[{"field":"Service URL","title":"Visit [service] website","description":"Information on using your library","link_text":"Go to the service website"},{"field":"New member URL","title":"Join the library","description":"Start having fun","link_text":"Join up now"},{"field":"Childrens service URL ","title":"Info for children","description":"Find out what the library offers","link_text":"Explore children\'s services"}]}}')}},[[102,1,2]]]);
//# sourceMappingURL=main.cf1c79eb.chunk.js.map